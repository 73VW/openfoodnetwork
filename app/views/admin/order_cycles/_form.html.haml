= f.label :name
= f.text_field :name, 'ng-model' => 'order_cycle.name', 'required' => true
%br/

= f.label :orders_open_at, 'Orders open'
= f.text_field :orders_open_at, 'class' => 'datetimepicker', 'ng-model' => 'order_cycle.orders_open_at'
= f.label :orders_close_at, 'Orders close'
= f.text_field :orders_close_at, 'class' => 'datetimepicker', 'ng-model' => 'order_cycle.orders_close_at'
%br/


%h2 Incoming
%table
  %tr{'ng-repeat' => 'exchange in order_cycle.incoming_exchanges'}
    %td {{ enterprises[exchange.enterprise_id].name }}

= select_tag :new_supplier_id, options_from_collection_for_select(Enterprise.is_primary_producer, :id, :name), {'ng-model' => 'new_supplier_id'}
= f.submit 'Add supplier', 'ng-click' => 'addSupplier($event)'


%h2 Coordinator
= f.label :coordinator_id, 'Coordinator'
= f.collection_select :coordinator_id, Enterprise.all, :id, :name, {}, {'ng-model' => 'order_cycle.coordinator_id', 'required' => true}

%h2 Outgoing
%p TODO

= f.submit @order_cycle.new_record? ? 'Create' : 'Update'
or
= link_to 'Cancel', main_app.admin_order_cycles_path

%pre {{ order_cycle | json }}
%pre {{ enterprises | json }}
