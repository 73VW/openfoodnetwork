%products{"ng-controller" => "ProductsCtrl", "ng-show" => "order_cycle.order_cycle_id != null",
"infinite-scroll" => "incrementLimit()", "infinite-scroll-distance" => "1"}

  = form_for :order, :url => populate_orders_path, html: {:class => "custom"} do

    %input#search.text{"ng-model" => "query", 
    placeholder: "Search",
    "ng-debounce" => "150",
    "ofn-disable-enter" => true}
    %input.button.right{type: :submit, value: "Add to Cart"}

    .row
      .small-12.columns
        .product_table{bindonce: true}
          %product.row{"ng-controller" => "ProductNodeCtrl",
            "ng-repeat" => "product in data.products | filter:query | orderBy:order | limitTo: limit track by product.id"}

            = render partial: "shop/products/summary"
            
            %div{"bo-if" => "hasVariants"}
              = render partial: "shop/products/variants"

            .row{"bo-if" => "!hasVariants"}
              = render partial: "shop/products/master"

    %input.button.right{type: :submit, value: "Add to Cart"}


